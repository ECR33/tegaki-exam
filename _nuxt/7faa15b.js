(window.webpackJsonp=window.webpackJsonp||[]).push([[4,7],{436:function(t,e,n){var content=n(439);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("363f7858",content,!0,{sourceMap:!1})},438:function(t,e,n){"use strict";n(436)},439:function(t,e,n){var o=n(21)(!1);o.push([t.i,".drawcanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:pinch-zoom}@media screen{.drawcanvas{border:1px dashed silver}}",""]),t.exports=o},440:function(t,e,n){"use strict";n.r(e);var o=n(32),r=(n(4),n(59),n(45),n(111),{props:["points","mode","w","h"],data:function(){return{x:0,y:0,r:1,px:"",color:"#606060",lineWidth:3,c_w:0,c_h:0,currentWidth:0,isOn:!1,isEffective:!1,isMoved:!1,currnetPoint:null,currentLine:null,innerPoints:[],redodata:[],eracedData:[],canvas:null,context:null}},watch:{mode:function(){switch(this.mode){case 0:break;case 1:this.clear(),this.reDraw(),this.$emit("update:mode",0);break;case 2:this.clear(),this.rePlay(),this.$emit("update:mode",0);break;case 3:this.undo(),this.$emit("update:mode",0);break;case 4:this.redo(),this.$emit("update:mode",0);break;case 5:this.$emit("update:points",this.innerPoints),this.$emit("update:mode",0)}},points:function(){0==this.points.length?(this.eracedData=this.innerPoints,this.redodata=[],this.innerPoints=this.points,this.clear()):0==this.mode&&(this.innerPoints=this.points)},w:function(){this.c_w=this.w},h:function(){this.c_h=this.h}},mounted:function(){this.init()},methods:{init:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("pointerdown",this.pointerdown,!1),this.canvas.addEventListener("pointerup",this.pointerup,!1),this.canvas.addEventListener("pointermove",this.pointermove,!1)},resize:function(){var t=this;this.currentWidth=window.innerWidth,this.$nextTick((function(){t.r=window.devicePixelRatio,t.c_w=t.canvas.clientWidth,t.c_h=t.canvas.clientHeight,t.$emit("update:w",t.canvas.clientWidth),t.$emit("update:h",t.canvas.clientHeight)}))},resizeEvent:function(){this.resize()},getPoint:function(t){return{x:t.layerX,y:t.layerY}},pointerup:function(t){if(!this.isMoved){var p=this.getPoint(t);this.currentLine.push(p),this.context.lineTo(p.x,p.y),this.context.lineCap="round",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.stroke()}this.innerPoints.push(this.currentLine),this.isMoved=!1},pointerdown:function(t){if(t.preventDefault(),0==this.mode){this.redodata=[],this.eracedData=[],t.target.setPointerCapture(t.pointerId);var p=this.getPoint(t);this.currentLine=[],this.currentLine.push(p),this.isMoved=!1,this.context.beginPath(),this.context.moveTo(p.x,p.y)}},pointermove:function(t){if(1==t.buttons||1==t.witch||"touchmove"==t.type){this.isMoved=!0;var p=this.getPoint(t);this.currentLine.push(p),this.context.lineTo(p.x,p.y),this.context.lineCap="round",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.stroke()}},drawLine:function(p){this.context.beginPath(),this.context.moveTo(this.currnetPoint.x,this.currnetPoint.y),this.context.lineTo(p.x,p.y),this.context.lineWidth=this.lineWidth,this.context.lineCap="round",this.context.strokeStyle=this.color,this.context.stroke()},reDraw:function(){var t=this;this.$nextTick((function(){for(var i=0;i<t.innerPoints.length;i++){t.currnetPoint=t.innerPoints[i][0];for(var e=0;e<t.innerPoints[i].length;e++)t.drawLine(t.innerPoints[i][e]),t.currnetPoint=t.innerPoints[i][e]}}))},rePlay:function(){var t=this;this.$nextTick(Object(o.a)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.innerPoints.length)){e.next=17;break}t.currnetPoint=t.innerPoints[i][0],n=0;case 4:if(!(n<t.innerPoints[i].length)){e.next=12;break}return t.drawLine(t.innerPoints[i][n]),t.currnetPoint=t.innerPoints[i][n],e.next=9,t.sleep(5);case 9:n++,e.next=4;break;case 12:return e.next=14,t.sleep(300);case 14:i++,e.next=1;break;case 17:case"end":return e.stop()}}),e)}))))},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="rgb(255,255,255"},sleep:function(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))},undo:function(){if(this.eracedData.length>0)return this.innerPoints=this.eracedData,this.eracedData=[],this.clear(),void this.reDraw();if(0!=this.innerPoints.length){var t=this.innerPoints.slice(-1);this.redodata.push(t[0]),this.innerPoints=this.innerPoints.slice(0,-1),this.clear(),this.reDraw()}},redo:function(){if(0!=this.redodata.length){var t=this.redodata.slice(-1);this.innerPoints.push(t[0]),this.redodata=this.redodata.slice(0,-1),this.clear(),this.reDraw()}}}}),c=(n(438),n(72)),component=Object(c.a)(r,(function(){var t=this;return(0,t._self._c)("canvas",{ref:"canvas",staticClass:"drawcanvas",attrs:{width:t.c_w,height:t.c_h}})}),[],!1,null,null,null);e.default=component.exports},478:function(t,e,n){var content=n(524);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("c5e32bb4",content,!0,{sourceMap:!1})},523:function(t,e,n){"use strict";n(478)},524:function(t,e,n){var o=n(21)(!1);o.push([t.i,".draw-box-wrapper[data-v-6c552857]{display:block;position:relative;padding:.5em 0 .5em .5em;margin:0;width:350px;height:550px}.drawtext[data-v-6c552857]{position:relative}.drawdebugbox[data-v-6c552857]{position:absolute;top:0;left:0;writing-mode:horizontal-tb;font-size:10px}.command-bar[data-v-6c552857]{position:absolute!important;top:0;right:0;display:flex;flex-direction:column-reverse}.pointerbox[data-v-6c552857]{position:absolute;bottom:0;left:0;writing-mode:horizontal-tb;font-size:10px}ruby[data-v-6c552857]{color:transparent;word-break:keep-all}rt[data-v-6c552857]{color:#202020;font-size:.2em}",""]),t.exports=o},537:function(t,e,n){"use strict";n.r(e);var o=n(284),r=n(191),c={props:["word","index"],data:function(){return{x:0,y:0,r:1,px:"",isOn:!1,isEffective:!1,points:[],pointNow:null,mode:0,currentWidth:0,c_w:0,c_h:0}},mounted:function(){this.resize(),console.log("drawBox mounted:",this.index,JSON.stringify(this.word))},methods:{resize:function(){if(this.currentWidth!=window.innerWidth){this.r=window.devicePixelRatio,this.currentWidth=window.innerWidth;var t=this.$refs.drawboxwrapper;this.px=Math.round(72*this.r)+"px",t.style.fontSize=this.px}},replay:function(){this.mode=2},clear:function(){this.points=[]},emitChange:function(){var t=this;this.mode=5,this.$nextTick((function(){t.$emit("change",t.points)}))},load:function(){var t=this;this.$axios.get("/data_b.json").then((function(e){t.points=e.data}))}}},h=(n(523),n(72)),component=Object(h.a)(c,(function(){var t=this,e=t._self._c;return e("div",{ref:"drawboxwrapper",staticClass:"draw-box-wrapper"},[e("div",{ref:"drawtext",staticClass:"drawtext"},[t._v("\n    ("),e("ruby",[t._v("\n      "+t._s(t.word.a)+"\n      "),e("rt",[t._v(t._s(t.word.q))])]),t._v(")\n  ")]),t._v(" "),e("div",{staticClass:"drawdebugbox"},[t._v("\n    "+t._s(t.x)+","+t._s(t.y)+", "+t._s(Math.round(100*t.r))+"%, "+t._s(t.px)+", "+t._s(t.c_w)+",\n    "+t._s(t.c_h)+"\n  ")]),t._v(" "),e("div",{staticClass:"pointerbox"},[t._v(t._s(t.pointNow))]),t._v(" "),e("draw-canvas2",{ref:"drawcanvas",attrs:{points:t.points,mode:t.mode,w:t.c_w,h:t.c_h},on:{"update:points":function(e){t.points=e},"update:mode":function(e){t.mode=e},"update:w":function(e){t.c_w=e},"update:h":function(e){t.c_h=e}}}),t._v(" "),e("div",{staticClass:"command-bar"},[e(o.a,{attrs:{small:"",color:"teal",icon:""},on:{click:t.load}},[e(r.a,[t._v("mdi-download")])],1),t._v(" "),e(o.a,{attrs:{small:"",color:"teal",icon:""},on:{click:t.emitChange}},[e(r.a,[t._v("mdi-ladybug")])],1),t._v(" "),e(o.a,{attrs:{small:"",color:"teal",icon:""},on:{click:t.replay}},[e(r.a,[t._v("mdi-play-circle")])],1),t._v(" "),e(o.a,{attrs:{small:"",color:"teal",icon:""},on:{click:t.clear}},[e(r.a,[t._v("mdi-delete")])],1)],1)],1)}),[],!1,null,"6c552857",null);e.default=component.exports;installComponents(component,{DrawCanvas2:n(440).default})}}]);