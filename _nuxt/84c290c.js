(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{479:function(t,e,n){var content=n(526);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("48a9dcd1",content,!0,{sourceMap:!1})},525:function(t,e,n){"use strict";n(479)},526:function(t,e,n){var r=n(21)(!1);r.push([t.i,".drawcanvas[data-v-6fba55d5]{position:absolute;top:0;left:0;width:100%;height:100%;border:1px dashed silver;touch-action:none}",""]),t.exports=r},538:function(t,e,n){"use strict";n.r(e);var r=n(32),o=(n(111),n(59),n(35),n(4),n(45),{props:["points","mode","w","h"],data:function(){return{x:0,y:0,r:1,px:"",color:"#606060",c_w:0,c_h:0,currentWidth:0,isOn:!1,isEffective:!1,isMoved:!1,currnetPoint:null,currentLine:null,innerPoints:[],redodata:[]}},watch:{mode:function(){switch(this.mode){case 0:break;case 1:this.clear(),this.reDraw(),this.$emit("update:mode",0);break;case 2:this.clear(),this.rePlay(),this.$emit("update:mode",0);break;case 3:this.undo(),this.$emit("update:mode",0);break;case 4:this.redo(),this.$emit("update:mode",0);break;case 5:this.$emit("update:points",this.innerPoints),this.$emit("update:mode",0)}},points:function(){0==this.points.length?(this.innerPoints=this.points,this.clear()):0==this.mode&&(this.innerPoints=this.points)}},mounted:function(){this.resize(),window.addEventListener("orientationchange",this.resize),window.addEventListener("resize",this.resize)},methods:{getPoint:function(t){return{x:t.layerX,y:t.layerY}},pointerup:function(t){if(this.isOn){t.target.releasePointerCapture(t.pointerId);var p=this.getPoint(t);this.isEffective&&(this.isEffective=!1,this.isMoved||this.currentLine.push(p),this.isMoved=!1,this.innerPoints.push(this.currentLine),this.isOn=!1)}this.currentLine=null,this.currnetPoint=null},pointerdown:function(t){var e=this;if(0==this.mode)if(t.isPrimary){this.isOn=!0,this.isEffective=!1,this.isMoved=!1,t.target.setPointerCapture(t.pointerId);var p=this.getPoint(t);setTimeout((function(){e.isOn&&(e.isEffective=!0,e.currentLine=[],e.currnetPoint=p,e.drawLine(p))}),50)}else this.isOn=!1,t.target.releasePointerCapture(t.pointerId),this.currentLine=null,this.currnetPoint=null},pointermove:function(t){if(this.isOn&&this.isEffective){this.isMoved=!0;var p=this.getPoint(t);this.drawLine(p),this.currentLine.push(p),this.currnetPoint=p}},drawLine:function(p){var t=this.canvas.getContext("2d");t.beginPath(),t.moveTo(this.currnetPoint.x,this.currnetPoint.y),t.lineTo(p.x,p.y),t.lineWidth=3,t.lineCap="round",t.strokeStyle=this.color,t.stroke()},reDraw:function(){var t=this;this.$nextTick((function(){for(var i=0;i<t.innerPoints.length;i++){t.currnetPoint=t.innerPoints[i][0];for(var e=0;e<t.innerPoints[i].length;e++)t.drawLine(t.innerPoints[i][e]),t.currnetPoint=t.innerPoints[i][e]}}))},rePlay:function(){var t=this;this.$nextTick(Object(r.a)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.innerPoints.length)){e.next=17;break}t.currnetPoint=t.innerPoints[i][0],n=0;case 4:if(!(n<t.innerPoints[i].length)){e.next=12;break}return t.drawLine(t.innerPoints[i][n]),t.currnetPoint=t.innerPoints[i][n],e.next=9,t.sleep(10);case 9:n++,e.next=4;break;case 12:return e.next=14,t.sleep(500);case 14:i++,e.next=1;break;case 17:case"end":return e.stop()}}),e)}))))},resize:function(){var t=this;this.currentWidth!=window.innerWidth&&(this.currentWidth=window.innerWidth,setTimeout((function(){t.r=window.devicePixelRatio,t.canvas=t.$refs.canvas,console.log("canvas",t.canvas.clientWidth,t.canvas.clientHeight),t.c_w=t.canvas.clientWidth,t.c_h=t.canvas.clientHeight,t.$emit("update:w",t.canvas.clientWidth),t.$emit("update:h",t.canvas.clientHeight);var e=window.screen.availWidth,n=window.screen.width,r=document.documentElement.clientWidth;console.log("resize: ".concat(e,", ").concat(n,", ").concat(r,", ").concat(100*t.r))}),200))},clear:function(){this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)},sleep:function(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))},undo:function(){if(0!=this.innerPoints.length){var t=this.innerPoints.slice(-1);this.redodata.push(t[0]),this.innerPoints=this.innerPoints.slice(0,-1),this.clear(),this.reDraw()}},redo:function(){if(0!=this.redodata.length){var t=this.redodata.slice(-1);this.innerPoints.push(t[0]),this.redodata=this.redodata.slice(0,-1),this.clear(),this.reDraw()}}}}),c=(n(525),n(72)),component=Object(c.a)(o,(function(){var t=this;return(0,t._self._c)("canvas",{ref:"canvas",staticClass:"drawcanvas",attrs:{width:t.c_w,height:t.c_h},on:{pointerdown:function(e){return e.preventDefault(),e.stopPropagation(),t.pointerdown.apply(null,arguments)},pointerup:function(e){return e.preventDefault(),e.stopPropagation(),t.pointerup.apply(null,arguments)},pointermove:function(e){return e.preventDefault(),e.stopPropagation(),t.pointermove.apply(null,arguments)}}})}),[],!1,null,"6fba55d5",null);e.default=component.exports}}]);