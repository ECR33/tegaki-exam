(window.webpackJsonp=window.webpackJsonp||[]).push([[3,5,7],{436:function(t,n,e){var content=e(439);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("363f7858",content,!0,{sourceMap:!1})},437:function(t,n,e){var content=e(443);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("5905e1af",content,!0,{sourceMap:!1})},438:function(t,n,e){"use strict";e(436)},439:function(t,n,e){var o=e(21)(!1);o.push([t.i,".drawcanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:pinch-zoom}@media screen{.drawcanvas{border:1px dashed silver}}",""]),t.exports=o},440:function(t,n,e){"use strict";e.r(n);var o=e(32),r=(e(4),e(59),e(45),e(111),{props:["points","mode","w","h"],data:function(){return{x:0,y:0,r:1,px:"",color:"#606060",lineWidth:3,c_w:0,c_h:0,currentWidth:0,isOn:!1,isEffective:!1,isMoved:!1,currnetPoint:null,currentLine:null,innerPoints:[],redodata:[],eracedData:[],canvas:null,context:null}},watch:{mode:function(){switch(this.mode){case 0:break;case 1:this.clear(),this.reDraw(),this.$emit("update:mode",0);break;case 2:this.clear(),this.rePlay(),this.$emit("update:mode",0);break;case 3:this.undo(),this.$emit("update:mode",0);break;case 4:this.redo(),this.$emit("update:mode",0);break;case 5:this.$emit("update:points",this.innerPoints),this.$emit("update:mode",0)}},points:function(){0==this.points.length?(this.eracedData=this.innerPoints,this.redodata=[],this.innerPoints=this.points,this.clear()):0==this.mode&&(this.innerPoints=this.points)},w:function(){this.c_w=this.w},h:function(){this.c_h=this.h}},mounted:function(){this.init()},methods:{init:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("pointerdown",this.pointerdown,!1),this.canvas.addEventListener("pointerup",this.pointerup,!1),this.canvas.addEventListener("pointermove",this.pointermove,!1)},resize:function(){var t=this;this.currentWidth=window.innerWidth,this.$nextTick((function(){t.r=window.devicePixelRatio,t.c_w=t.canvas.clientWidth,t.c_h=t.canvas.clientHeight,t.$emit("update:w",t.canvas.clientWidth),t.$emit("update:h",t.canvas.clientHeight)}))},resizeEvent:function(){this.resize()},getPoint:function(t){return{x:t.layerX,y:t.layerY}},pointerup:function(t){if(!this.isMoved){var p=this.getPoint(t);this.currentLine.push(p),this.context.lineTo(p.x,p.y),this.context.lineCap="round",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.stroke()}this.innerPoints.push(this.currentLine),this.isMoved=!1},pointerdown:function(t){if(t.preventDefault(),0==this.mode){this.redodata=[],this.eracedData=[],t.target.setPointerCapture(t.pointerId);var p=this.getPoint(t);this.currentLine=[],this.currentLine.push(p),this.isMoved=!1,this.context.beginPath(),this.context.moveTo(p.x,p.y)}},pointermove:function(t){if(1==t.buttons||1==t.witch||"touchmove"==t.type){this.isMoved=!0;var p=this.getPoint(t);this.currentLine.push(p),this.context.lineTo(p.x,p.y),this.context.lineCap="round",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,this.context.stroke()}},drawLine:function(p){this.context.beginPath(),this.context.moveTo(this.currnetPoint.x,this.currnetPoint.y),this.context.lineTo(p.x,p.y),this.context.lineWidth=this.lineWidth,this.context.lineCap="round",this.context.strokeStyle=this.color,this.context.stroke()},reDraw:function(){var t=this;this.$nextTick((function(){for(var i=0;i<t.innerPoints.length;i++){t.currnetPoint=t.innerPoints[i][0];for(var n=0;n<t.innerPoints[i].length;n++)t.drawLine(t.innerPoints[i][n]),t.currnetPoint=t.innerPoints[i][n]}}))},rePlay:function(){var t=this;this.$nextTick(Object(o.a)(regeneratorRuntime.mark((function n(){var i,e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<t.innerPoints.length)){n.next=17;break}t.currnetPoint=t.innerPoints[i][0],e=0;case 4:if(!(e<t.innerPoints[i].length)){n.next=12;break}return t.drawLine(t.innerPoints[i][e]),t.currnetPoint=t.innerPoints[i][e],n.next=9,t.sleep(5);case 9:e++,n.next=4;break;case 12:return n.next=14,t.sleep(300);case 14:i++,n.next=1;break;case 17:case"end":return n.stop()}}),n)}))))},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="rgb(255,255,255"},sleep:function(t){return new Promise((function(n){setTimeout((function(){n()}),t)}))},undo:function(){if(this.eracedData.length>0)return this.innerPoints=this.eracedData,this.eracedData=[],this.clear(),void this.reDraw();if(0!=this.innerPoints.length){var t=this.innerPoints.slice(-1);this.redodata.push(t[0]),this.innerPoints=this.innerPoints.slice(0,-1),this.clear(),this.reDraw()}},redo:function(){if(0!=this.redodata.length){var t=this.redodata.slice(-1);this.innerPoints.push(t[0]),this.redodata=this.redodata.slice(0,-1),this.clear(),this.reDraw()}}}}),c=(e(438),e(72)),component=Object(c.a)(r,(function(){var t=this;return(0,t._self._c)("canvas",{ref:"canvas",staticClass:"drawcanvas",attrs:{width:t.c_w,height:t.c_h}})}),[],!1,null,null,null);n.default=component.exports},442:function(t,n,e){"use strict";e(437)},443:function(t,n,e){var o=e(21)(!1);o.push([t.i,".draw-box-wrapper{display:block;position:relative;margin:0}.drawtext{display:block;top:-.5em;bottom:0;right:0;writing-mode:vertical-rl;white-space:nowrap}.drawdebugbox,.drawtext{position:absolute;left:0}.drawdebugbox{font-size:10px}.command-bar,.drawdebugbox{top:0;writing-mode:horizontal-tb}.command-bar{position:absolute!important;right:0;display:flex}@media print{.command-bar{display:none}}.pointerbox{position:absolute;bottom:0;left:0;writing-mode:horizontal-tb;font-size:10px}ruby{word-break:keep-all;color:#c8c8c8}.ruby-hint{color:hsla(0,0%,78.4%,0);transition:color 2s}rt{color:#202020;font-size:.2em}",""]),t.exports=o},459:function(t,n,e){"use strict";e.r(n);var o=e(284),r=e(191),c=(e(59),{props:["word","index","fs","sa","md"],data:function(){return{x:0,y:0,ratio:1,fontSize:64,px:"",isOn:!1,isEffective:!1,points:[],pointNow:null,mode:0,currentWidth:0,c_w:0,c_h:0,drawtext:null,hint:!1,showAnswers:!1,debug:!1}},watch:{word:function(){var t=this;this.$nextTick((function(){t.word.a.length>0&&(t.clear(),t.resize())}))},fs:function(){var t=this;this.fontSize=this.fs,this.$nextTick((function(){t.init(),t.$nextTick((function(){t.resize()}))}))},sa:function(){console.log("drawBox2: showAnswers chenged"),this.showAnswers=this.sa},md:function(){this.mode=this.md},mode:function(){this.$emit("update:md",this.mode)}},computed:{ans:function(){return this.showAnswers?this.word.a:this.word.q}},mounted:function(){var t=this;this.drawtext=this.$refs.drawtext,this.init(),this.$nextTick((function(){t.resize()})),window.addEventListener("orientationchange",this.resizeEvent),window.addEventListener("resize",this.resizeEvent)},methods:{init:function(){this.ratio=window.devicePixelRatio;var t=this.$refs.drawboxwrapper,n=Math.round(this.fontSize*this.ratio);this.px=n+"px",t.style.fontSize=this.px,t.style.padding="28px 0 0 0";var e=Math.round(n+this.fontSize/2*this.ratio);t.style.width="".concat(e,"px"),this.c_w=e},resize:function(){this.currentWidth=window.innerWidth;var t=this.$refs.drawboxwrapper,n=Math.round(this.fontSize*this.ratio),e=Math.round(n*(this.word.a.length+2)-n/3);t.style.height="".concat(e,"px"),this.c_h=e},resizeEvent:function(){console.log("drawBox2: resize event occured"),this.resize()},replay:function(){this.mode=2},clear:function(){this.points=[]},emitChange:function(){var t=this;this.mode=5,this.$nextTick((function(){t.$emit("change",t.points)}))},load:function(){var t=this;this.$axios.get("/data_b.json").then((function(n){t.points=n.data}))},showHint:function(){var t=this;this.hint=!0,setTimeout((function(){t.hint=!1}),1e3)},undo:function(){this.mode=3},redo:function(){this.mode=4}}}),h=(e(442),e(72)),component=Object(h.a)(c,(function(){var t=this,n=t._self._c;return n("div",{ref:"drawboxwrapper",staticClass:"draw-box-wrapper"},[n("div",{ref:"drawtext",staticClass:"drawtext"},[n("span",[t._v("（")]),t._v(" "),n("ruby",{class:{"ruby-hint":!t.hint}},[t._v("\n      "+t._s(t.word.a)+"\n      "),n("rt",[t._v(t._s(t.ans))])]),t._v(" "),n("span",[t._v("）")])]),t._v(" "),t.debug?n("div",{staticClass:"drawdebugbox"},[t._v("\n    "+t._s(t.x)+","+t._s(t.y)+", "+t._s(Math.round(100*t.ratio))+"%, "+t._s(t.px)+", "+t._s(t.c_w)+",\n    "+t._s(t.c_h)+"\n  ")]):t._e(),t._v(" "),t.debug?n("div",{staticClass:"pointerbox"},[t._v(t._s(t.pointNow))]):t._e(),t._v(" "),n("draw-canvas2",{ref:"drawcanvas",attrs:{points:t.points,mode:t.mode,w:t.c_w,h:t.c_h},on:{"update:points":function(n){t.points=n},"update:mode":function(n){t.mode=n},"update:w":function(n){t.c_w=n},"update:h":function(n){t.c_h=n}}}),t._v(" "),n("div",{staticClass:"command-bar"},[t.debug?n("div",[n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.load}},[n(r.a,[t._v("mdi-download")])],1),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.emitChange}},[n(r.a,[t._v("mdi-ladybug")])],1),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.replay}},[n(r.a,[t._v("mdi-play-circle")])],1)],1):t._e(),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.undo}},[n(r.a,[t._v("mdi-undo")])],1),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.redo}},[n(r.a,[t._v("mdi-redo")])],1),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.showHint}},[n(r.a,[t._v("mdi-help-circle")])],1),t._v(" "),n(o.a,{attrs:{"x-small":t.ratio<2,small:t.ratio>=2,color:"teal",icon:""},on:{click:t.clear}},[n(r.a,[t._v("mdi-delete")])],1)],1)],1)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{DrawCanvas2:e(440).default})},461:function(t,n,e){var content=e(470);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("8db6b294",content,!0,{sourceMap:!1})},469:function(t,n,e){"use strict";e(461)},470:function(t,n,e){var o=e(21)(!1);o.push([t.i,".ans-box-wrapper{position:relative;padding:.5em .7em .5em 0;border-bottom:1px solid silver;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.wordbox{display:block;writing-mode:vertical-rl}",""]),t.exports=o},481:function(t,n,e){"use strict";e.r(n);e(35);var o={props:["q","index","fs","sa"],data:function(){return{question:[],answer:[],html:"",handwriter:null,canvas:null,ansbox:null,x:0,y:0,fontSize:64,mode:0,debug:!1}},watch:{"q.answer":function(){this.answer=this.analyse(this.q.answer),console.log("a:",JSON.stringify(this.answer))},"q.question":function(){this.question=this.analyse(this.q.question),console.log("q:",JSON.stringify(this.question))},fs:function(){this.fontSize=this.fs}},created:function(){},mounted:function(){this.fontSize=this.fs},methods:{debugPrint:function(){var t=this.canvas.width,n=this.canvas.height,e=(this.ansbox.clientX,this.ansbox.clientY,this.ansbox.clientWidth),o=this.ansbox.clientHeight;console.log("canvas: w:".concat(t,", h:").concat(n)),console.log("ansbox: w:".concat(e,", h:").concat(o)),console.log("q: ".concat(JSON.stringify(this.q)))},create:function(){for(var t="",i=0;i<this.q.length;i++){var n=this.q[i].a;0==this.q[i].type?t+='<span class="text">'+n+"</span>":1==this.q[i].type&&(t+="（<ruby>"+n+"<rt>"+this.q[i].q+"</rt></ruby>）")}return t}}},r=(e(469),e(72)),component=Object(r.a)(o,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"ans-box-wrapper"},t._l(t.q,(function(e,o){return n("div",{key:o},[0==e.type?n("div",{staticClass:"wordbox",style:{"font-size":t.fs/2+"px"}},[t._v("\n      "+t._s(e.q)+"\n    ")]):t._e(),t._v(" "),t.debug?n("div",{staticClass:"debugbox"},[t._v(t._s(t.x)+","+t._s(t.y))]):t._e(),t._v(" "),1==e.type?n("draw-box2",{attrs:{word:e,index:o,fs:t.fontSize,sa:t.sa}}):t._e()],1)})),0)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{DrawBox2:e(459).default})}}]);